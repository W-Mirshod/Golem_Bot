services:
  golemsp-bot:
    build: .
    container_name: golemsp-telegram-bot
    restart: unless-stopped
    env_file:
      - .env
    volumes:
      # Mount golemsp binary from host (mount the actual binary, not the symlink)
      # Note: The binary must have execute permissions on the host
      - /home/mer/.local/share/ya-installer/bundles/golem-provider-linux-v0.17.6/golemsp:/usr/local/bin/golemsp:ro
      # Mount golemsp configuration directory (needs write access for lock files)
      - /home/mer/.local/share/ya-provider:/root/.local/share/ya-provider:rw
      # Mount yagna plugins directory if needed
      - /home/mer/.local/lib/yagna:/root/.local/lib/yagna:ro
      # Mount yagna share directory (may contain runtime files)
      - /home/mer/.local/share/yagna:/root/.local/share/yagna:ro
    # Use host network to access golemsp service if it's running on host
    network_mode: host
    # Run as root to ensure permissions (or set user if needed)
    # user: "1000:1000"  # Uncomment and adjust if you need to run as specific user
    # Alternative: if golemsp is in another container, use bridge network
    # networks:
    #   - golemsp-network

# Uncomment if using bridge network instead of host network
# networks:
#   golemsp-network:
#     external: true

